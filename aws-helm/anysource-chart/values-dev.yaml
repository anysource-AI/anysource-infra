# Development values file
# Includes embedded PostgreSQL and Redis for development

global:
  domain: "mcp.dev.example.com"
  environment: "staging"
  # Anysource support will provide this
  auth_client_id: "your-auth-client-id"

# Enable embedded databases for development
postgresql:
  enabled: true
  auth:
    postgresPassword: "postgres123"
    username: "postgres"
    password: "postgres123"
    database: "postgres"
  primary:
    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: 250m
        memory: 512Mi
  readReplicas:
    replicaCount: 0
    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: 250m
        memory: 512Mi

redis:
  enabled: true
  auth:
    enabled: true
    password: "redis123"
  master:
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 100m
        memory: 256Mi
  replica:
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 100m
        memory: 256Mi
    replicaCount: 1

# Use ALB ingress for development
ingress:
  enabled: true
  className: "alb"
  forceHttps: true
  annotations:
    kubernetes.io/ingress.class: alb
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
    alb.ingress.kubernetes.io/ssl-policy: ELBSecurityPolicy-TLS-1-2-2017-01
  tls:
    enabled: true

certManager:
  enabled: false

# Development resource allocation (smaller)
backend:
  replicas: 1
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: 1000m
      memory: 2Gi

  # Development secrets - these should be changed for production
  secrets:
    SECRET_KEY: "dev-secret-key-change-in-production-minimum-32-chars"
    MASTER_SALT: "dev-master-salt-change-in-production-minimum-32-chars"
    AUTH_API_KEY: "sk_test_your_auth_api_key_here"

frontend:
  replicas: 1
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 500m
      memory: 1Gi

# HPA configuration for development (disabled or minimal)
hpa:
  backend:
    enabled: false
  frontend:
    enabled: false

# Relaxed security context for development
securityContext:
  runAsNonRoot: false
  runAsUser: 0
  readOnlyRootFilesystem: false

# Database prestart init container with reduced resources
prestart:
  enabled: true
  image:
    repository: 412677576004.dkr.ecr.us-east-1.amazonaws.com/backend
    tag: sandbox
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 500m
      memory: 1Gi

# Directory sync with reduced resources
directorySync:
  enabled: true
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 500m
      memory: 1Gi

# Service account without special annotations
serviceAccount:
  annotations: {}
